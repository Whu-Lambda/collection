è¦ç‚¹ï¼š

- Rust é¡¹ç›®ç»“æ„
- ç¨‹åºæ¨¡å—åŒ–
- ä¸Šä¼ ä½ çš„ä»£ç 

# Rust é¡¹ç›®ç»“æ„

Rust è¯­è¨€æœ‰å®Œå–„çš„å·¥å…·é“¾ï¼Œè¿™ä¹Ÿæ˜¯è‡ªå·±å–œæ¬¢ Rust è¯­è¨€çš„åŸå› ä¹‹ä¸€ï¼Œè¿™æ¯” C/C++ å¥½å¤šäº†ã€‚å®‰è£…å¥½ Rust è¯­è¨€åï¼Œå°±ä¼šè‡ªåŠ¨å®‰è£…ç›¸å…³çš„å·¥å…·é“¾ã€‚

Rust è¯­è¨€é‡‡ç”¨ Cargo ç®¡ç†é¡¹ç›®ï¼Œæ–°å»ºé¡¹ç›®ï¼š

```shell
cargo new <project-name>
```

åŠ å…¥åˆ›å»ºäº†ä¸€ä¸ªåä¸º `hello_world` çš„é¡¹ç›®ï¼Œè¿›å…¥é¡¹ç›®ï¼š
```shell
$ cd hello_world
$ tree .
.
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ main.rs
```

ç„¶åè¿è¡Œé¡¹ç›®ï¼š

```shell
$ cargo run
   Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
     Running `target/debug/hello_world`
Hello, world!
```

`cargo run` ä¼šè‡ªåŠ¨æ‰¾åˆ° `src/main.rs` ï¼Œç¼–è¯‘ç„¶åè¿è¡Œã€‚



# ç¬¬ä¸‰æ–¹åº“

Rust å®‰è£…ç¬¬ä¸‰æ–¹åº“éå¸¸ç®€å•ï¼Œçœ‹åˆ° `Cargo.toml` äº†å—ï¼Œè¿™ä¸ªå°±æ˜¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒçš„ä¸»è¦ç±»å®¹å¦‚ä¸‹ï¼š

```toml
[package]
name = "hello_world"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]

```

ç”¨å¾—æœ€å¤šçš„å°±æ˜¯ `[dependencies]` æ¨¡å—ï¼Œæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½åœ¨è¿™é‡Œå®‰è£…ï¼Œä¾‹å¦‚ï¼š

```toml
[dependencies]
time = "0.1.12"
regex = "0.1.41"
```

ç„¶åä¿®æ”¹ `src/main.rs`:

```rust
use regex::Regex;

fn main() {
    let re = Regex::new(r"^\d{4}-\d{2}-\d{2}$").unwrap();
    println!("Did our date match? {}", re.is_match("2014-01-01"));
}
```

å†æ¬¡è¿è¡Œï¼š

```rust
D:\Github\backend\hello_world>cargo run
   Compiling libc v0.2.106      
   Compiling winapi-build v0.1.1
   ......
	 Compiling hello_world v0.1.0 (D:\Github\backend\hello_world)
    Finished dev [unoptimized + debuginfo] target(s) in 25.19s
     Running `target\debug\hello_world.exe`
Did our date match? true
```

# lib

å¦‚æœä½ åªæ‰“ç®—å†™å†™ä¸€ä¸ªåº“ï¼Œé‚£ä¹ˆå¯ä»¥è¿è¡Œ:

```shell
cargo new --lib <lib-name>
```

ä½ ä¼šå‘ç°é¡¹ç›®ç»“æ„å˜æˆäº†ï¼š

```shell
$ cd hello_world
$ tree .
.
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ lib.rs
```

è¿™æ—¶å€™æ‰§è¡Œ `cargo run` æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œä½ å¯ä»¥æ‰§è¡Œ `cargo test`

```shell
D:\Github\backend\hello_world>cargo test
   Compiling hello_world v0.1.0 (D:\Github\backend\hello_world)
    Finished test [unoptimized + debuginfo] target(s) in 1.02s
     Running unittests (target\debug\deps\hello_world-4631f9f1f15770e9.exe)

running 1 test
test tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests hello_world

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
```

æ‰“å¼€ `src/lib.rs` ä½ ä¼šå‘ç°é‡Œé¢çš„å†…å®¹åªæœ‰ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼š

```rust
#[cfg(test)]
mod tests {
    #[test]
    fn it_works() {
        let result = 2 + 2;
        assert_eq!(result, 4);
    }
}
```

# å¤šä¸ªæºæ–‡ä»¶

ç°åœ¨æˆ‘ä»¬å»ºç«‹å¦‚ä¸‹æ‰€ç¤ºçš„é¡¹ç›®ç»“æ„ï¼š

```shell
$ tree .
.
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â”œâ”€â”€ hello.rs
    â”œâ”€â”€ lib.rs
    â””â”€â”€ word.rs
```

åœ¨ `hello.rs` é‡Œå†™ä¸€ä¸ªå‡½æ•°ï¼š

```rust
pub fn say_hello(name: &str) {
    println!("Hello, {}", name);
}
```

åœ¨ `world.rs` é‡Œè°ƒç”¨ï¼š

```rust
#[cfg(test)]
mod tests {
    use crate::hello::say_hello;
    #[test]
    fn it_works() {
        say_hello("World");
    }
}
```

åœ¨ `lib.rs` é‡Œæ³¨å†ŒåŒæ–‡ä»¶åçš„æ¨¡å—ï¼š

```rust
mod hello;
mod world;
```

å†æ¬¡è¿è¡Œï¼š

```shell
D:\Github\backend\hello_world>cargo test
   Compiling hello_world v0.1.0 (D:\Github\backend\hello_world)
    Finished test [unoptimized + debuginfo] target(s) in 0.54s
     Running unittests (target\debug\deps\hello_world-4631f9f1f15770e9.exe)

running 1 test
test world::tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests hello_world

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s


D:\Github\backend\hello_world>cargo test
   Compiling hello_world v0.1.0 (D:\Github\backend\hello_world)
warning: function is never used: `say_hello`
 --> src\hello.rs:1:8
  |
1 | pub fn say_hello(name: &str) {
  |        ^^^^^^^^^
  |
  = note: `#[warn(dead_code)]` on by default

warning: `hello_world` (lib) generated 1 warning
    Finished test [unoptimized + debuginfo] target(s) in 0.57s
     Running unittests (target\debug\deps\hello_world-4631f9f1f15770e9.exe)

running 1 test
test world::tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests hello_world

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
```

é™¤äº†ä¸€å¯¹è­¦å‘Šä¿¡æ¯å¤–ï¼Œæ²¡æœ‰æ‰“å°ä»»ä½•æ¶ˆæ¯ï¼Œè¦æƒ³æµ‹è¯•æ—¶æ‰“å°å†…å®¹ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š

```shell
cargo test -- --nocapture
```

å¦‚æœæƒ³å…³æ‰è­¦å‘Šä¿¡æ¯ï¼Œåœ¨ `lib.rs` ç¬¬ä¸€è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```rust
#![allow(unused)]
mod hello;
mod world;
```

æœ€ç»ˆç»“æœï¼š

```shell
D:\Github\backend\hello_world>cargo test -- --nocapture
   Compiling hello_world v0.1.0 (D:\Github\backend\hello_world)
    Finished test [unoptimized + debuginfo] target(s) in 0.54s
     Running unittests (target\debug\deps\hello_world-4631f9f1f15770e9.exe)

running 1 test
Hello, World
test world::tests::it_works ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

   Doc-tests hello_world

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
```

ğŸ“è¦ç‚¹è§£è¯»ï¼š

- Rust åº“çš„å•ä½ç§°ä¸º `crate`ï¼Œæ‰€è°“ `crate` ç®€å•ç‚¹ç†è§£ï¼šå°±æ˜¯ä¸€ä¸ª `src`  æ–‡ä»¶å¤¹ï¼Œ`use crate::hello::say_hello` è¡¨ç¤ºå½“å‰ `src` æ–‡ä»¶å¤¹ `hello.rs` é‡Œçš„`say_hello` å‡½æ•°ã€‚
- Rust è¯­è¨€ `mod` å…³é”®å­—ç›¸å½“äºå…¶ä»–è¯­è¨€çš„ `namespace`ã€‚
- `main.rs` ä¸ `lib.rs` æ˜¯å¯ä»¥å…±å­˜çš„ã€‚

æ›´å¤šèµ„æ–™ï¼š

- cargo å®˜æ–¹æ–‡æ¡£ï¼šhttps://doc.rust-lang.org/cargo/index.html

# å°ç»“

ç°åœ¨ä½ å·²ç»å®Œæˆäº† Rust è¯­è¨€è¯­æ³•çš„å­¦ä¹ ï¼Œèµ¶ç´§ç”¨ Rust è¯­è¨€åˆ›é€ ä½ çš„ä¸–ç•Œå§ã€‚

