è¦ç‚¹ï¼š

- Rust è¯­è¨€å¦‚ä½•å®šä¹‰ç»“æ„ä½“ï¼›
- Rust è¯­è¨€å¦‚ä½•åˆå§‹åŒ–ç»“æ„ä½“ï¼›
- Rust å¦‚ä½•å®šä¹‰ç»“æ„ä½“æ–¹æ³•ï¼›


# ç»“æ„ä½“å®šä¹‰

Rust è¯­è¨€çš„ç»“æ„ç±»ä¼¼ C/C++ è¯­è¨€çš„ç»“æ„ä½“ï¼ŒPython è¯­è¨€çš„ç±»ä¸ JavaScript è¯­è¨€å¯¹è±¡ï¼ŒRust è¯­è¨€ç»“æ„ä½“æœ‰ä¸‰ç§å½¢å¼ã€‚

## å…·åå­—æ®µç»“æ„ä½“

ã€å®šä¹‰ã€‘

å…·åå­—æ®µï¼ˆnamed fieldï¼‰ç»“æ„çš„çš„å®šä¹‰ç¤ºä¾‹å¦‚ä¸‹ï¼š

```rust
struct UserModel {
    is_active: bool,
    username: String,
    email: String,
}
```

å…³é”®å­— `struct` åæ¥ç»“æ„ä½“åå­—ï¼Œåå­—é‡‡ç”¨é©¼å³°å‘½åè§„èŒƒï¼ˆCamelCaseï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰ã€‚

ã€æ„é€ ã€‘

ç»“æ„ä½“æ„é€ å®ä¾‹çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
struct UserModel {
    is_active: bool,
    username: String,
    email: String,
}

fn main() {
    let user = UserModel {
        email: String::from("someone@example.com"),
        username: String::from("rust"),
        is_active: true,
    };
    println!("{:?}", user);
}
```

è¿è¡Œä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š

```shell
error[E0277]: `UserModel` doesn't implement `Debug`
  --> src\main.rs:13:22
   |
13 |     println!("{:?}", user1);
   |                      ^^^^^ `UserModel` cannot be formatted using `{:?}`
   |
   = help: the trait `Debug` is not implemented for `UserModel`
   = note: add `#[derive(Debug)]` or manually implement `Debug`
   = note: required by `std::fmt::Debug::fmt`
   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)
```

ç¼–è¯‘æŠ¥é”™äº†ï¼Œè¯´æ²¡æœ‰å®ç° `Debug trait` ï¼Œéœ€è¦ç»™ç»“æ„ä½“åŠ ä¸Š  `#[derive(Debug)]`ï¼š

```rust
#[derive(Debug)]
struct UserModel {
    is_active: bool,
    username: String,
    email: String,
}
```

å†æ¬¡è¿è¡Œå³å¯çœ‹åˆ°æ‰“å°çš„ä¿¡æ¯ï¼š

```shell
UserModel { is_active: true, username: "rust", email: "someone@example.com" }
```

ğŸ’¡ ç†è§£ `trait`:  `trait` ç¿»è¯‘ä¸ºç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­ï¼šåƒè´§çš„ç‰¹æ€§æ˜¯åƒï¼Œå¦‚ä½•çœ‹ä¸€ä¸ªäººæ˜¯ä¸æ˜¯åƒè´§å°±çœ‹ä»–èƒ½ä¸èƒ½åƒï¼›æ‡’è™«çš„ç‰¹æ€§æ˜¯æ‡’ï¼Œåˆ¤æ–­ä¸€ä¸ªäººæ˜¯ä¸æ˜¯æ‡’è™«å°±çœ‹ä»–æ‡’ä¸æ‡’ã€‚ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä½¿ç”¨ `#[derive(Debug)]` ç»™ `UserModel` æ·»åŠ äº† `Debug` ç‰¹æ€§ä¹‹åï¼Œå°±èƒ½ç”¨ `{:?}` æ‰“å°è°ƒè¯•ä¿¡æ¯äº†ã€‚ä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•è½»æ¾çš„æ‰“å°è°ƒè¯•ä¿¡æ¯ã€‚

ã€è·å–å±æ€§å€¼ã€‘

å¯ä»¥ç”¨ `user.email` è·å–é‚®ä»¶ä¿¡æ¯ï¼š

```rust
println!("{:?}", user.email); // "someone@example.com"
```

ã€ä»å·²æœ‰å®ä¾‹æ„é€ ã€‘

å¯ä»¥åˆ©ç”¨å·²æœ‰çš„ç»“æ„ä½“æ„é€ æ–°çš„ï¼š

```rust
let user_blocked = UserModel {
    is_active: false,
    ..user
};
println!("{:?}", user_blocked); 
// UserModel { is_active: false, username: "rust", email: "someone@example.com" }
```



## å…ƒç»„ç»“æ„ä½“

å…ƒç»„ç»“æ„ä½“ï¼ˆtuple structï¼‰æ²¡æœ‰å­—æ®µåï¼Œè¯·çœ‹ç¤ºä¾‹ï¼š

```rust
#[derive(Debug)]
struct Point(i32, i32, i32);

fn main() {
    let p = Point(3, 4, 5);
    println!("{:?}, {:?}, {:?}, {:?}", p, p.0, p.1, p.2);
}
```

è¿è¡Œå¯ä»¥å¾—åˆ°ï¼š

```shell
Point(3, 4, 5), 3, 4, 5
```

ä¸éœ€è¦å­—æ®µåçš„æ—¶å€™ç”¨è¿™ä¸ªæ–¹æ³•å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥ç”¨åºå·å–å¾—å¯¹åº”ä½ç½®çš„å€¼ã€‚



## å•ä½ç»“æ„ä½“

å•ä½ç»“æ„ä½“ï¼ˆunit structï¼‰åªæœ‰åå­—æ²¡æœ‰æ•°æ®ï¼Œä¸å ç”¨å†…å­˜ã€‚è¿™ç±»ç»“æ„ä½“ä¸€èˆ¬ç»‘å®šæŸäº›ç‰¹æ€§ï¼Œç”¨ä½œæ³›å‹å‚æ•°ã€‚

```rust
#[derive(Debug)]
struct ErrorNotFound;

fn main() {
    let e = ErrorNotFound;
    println!("{:?}", e); // ErrorNotFound
}
```



# ä¸ºç»“æ„ä½“å®ç°æ–¹æ³•

å¦‚æœä½ ç†Ÿæ‚‰é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼Œä½ ä¼šè½»æ˜“æŒæ¡ Rust è¯­è¨€æ–¹æ³•çš„å®ç°æ–¹å¼ï¼š

```rust
#[derive(Debug)]
pub struct UserModel {
    is_active: bool,
    username: String,
    email: String,
}

impl UserModel {
    pub fn new(username: &str, email: &str) -> Self {
        Self {
            username: String::from(username),
            email: String::from(email),
            is_active: true,
        }
    }

    pub fn check_email(&self) -> bool {
        self.email.contains("@")
    }
}

fn main() {
    let user = UserModel::new("rust", "rust@rust.com");
    println!("{:?}", user.check_email()); // true
}
```

ä»”ç»†é˜…è¯»ä»¥ä¸Šä»£ç ï¼Œä½ ä¼šå¾—å‡ºå¦‚ä¸‹ç»“è®ºï¼š

- ä½ å¯ä»¥ä½¿ç”¨  `impl` ä¸ºç»“æ„ä½“å®ç°æ–¹æ³•ã€‚
- `Self` æ˜¯ `impl` åé¢çš„é‚£ä¸ªç±»å‹çš„åˆ«åã€‚
- å¯¹æ¯”ä¸¤ä¸ªæ–¹æ³•ï¼Œä½ ä¼šå‘ç°ç¬¬äºŒä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‚æ•°ï¼š`&self`ï¼Œå®ƒä»£è¡¨è°ƒç”¨å®ä¾‹çš„å¼•ç”¨ï¼Œç›¸å½“äº `this` ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç”¨ `self, &mut self`ã€‚
- ç¬¬ä¸€ä¸ªæ–¹æ³•æ²¡æœ‰ `self` ç›¸å…³çš„å‚æ•°ï¼Œç§°ä¸ºé™æ€æ–¹æ³•ï¼Œä½¿ç”¨åŸŸè¿ç®—ç¬¦ `::` è°ƒç”¨ã€‚
- `pub` å…³é”®å­—å³ `public`ï¼Œå³å…è®¸å…¶ä»–æ¨¡å—è°ƒç”¨ã€‚

ğŸ’¡ `SomeStruct::new()` æ˜¯å¸¸ç”¨çš„å®ä¾‹æ„é€ æ–¹æ³•ï¼Œä½ å¯ä»¥é€šè¿‡æœç´¢â€œåˆ›å»ºå‹æ¨¡å¼â€äº†è§£æ›´å¤šï¼Œä¸Šé¢ä¾‹å­çš„æ„é€ å‡½æ•°é»˜è®¤è¿”å› `is_active: true`  çš„å®ä¾‹ã€‚ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬ç»å¸¸ä½¿ç”¨å­—ç¬¦ä¸²æ„é€ å‡½æ•° `String::from()`ã€‚



# è§£æ„ç»“æ„ä½“

å¯ä»¥ç”¨å¦‚ä¸‹è¯­æ³•è§£æ„ï¼ˆdestructï¼‰ç»“æ„ä½“ï¼š

```rust
    let user = UserModel::new("Rust", "rust@rust.com");
    let UserModel {
        username: name,
        email,
        is_active,
    } = user;

    println!("{:?}, {:?}, {:?}", name, email, is_active);
		
    let another_user = UserModel::new("å°æ˜Ÿæ£®", "sen@sen.com");
    let UserModel { username, .. } = another_user;
    println!("{:?}", username);
```

ğŸ“è¦ç‚¹æ€»ç»“ï¼š

- ä½¿ç”¨è§£æ„è¯­æ³•å¯ä»¥æ–¹ä¾¿çš„æŠŠç»“æ„ä½“çš„å€¼ç»‘å®šåˆ°ç›¸åº”çš„å˜é‡ï¼›
- å¯ä»¥ç”¨ç±»ä¼¼ `username: name` çš„æ–¹æ³•é‡å‘½åç›¸åº”çš„å˜é‡ï¼›
- ä¸ä½¿ç”¨çš„å€¼å¯ä»¥ç”¨ `_` è·³è¿‡ï¼Œåªç”¨å°‘æ•°å˜é‡è€Œå…¶ä½™çš„å˜é‡ä¸ç”¨æ—¶ï¼Œå¯ä»¥ç”¨ `..` çœç•¥ã€‚

